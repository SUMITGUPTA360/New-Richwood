{"id":"pages_controller_custom","title":"Building a Custom Controller","content":"<a name=\"pages_controller_custom\"><!-- --></a><h1 class=\"helpHead1\"><span class=\"ph\" id=\"topic-title\"><a name=\"topic-title\"><!-- --></a>Building a Custom Controller</span></h1><div class=\"body\">\n<p class=\"p\">A custom controller is an Apex class that uses the default, no-argument constructor for the outer,\ntop-level class. You cannot create a custom controller constructor\nthat includes parameters.</p>\n\n<div class=\"p\">To create a custom controller:<ol class=\"ol enumList\">\n<li class=\"li\">From Setup, enter <kbd class=\"ph userinput\">Apex Classes</kbd> in the <span class=\"keyword parmname\">Quick Find</span>\n     box, then select <strong class=\"ph uicontrol\">Apex\n      Classes</strong>.</li>\n\n<li class=\"li\">Click <strong class=\"ph uicontrol\">New</strong>.</li>\n\n<li class=\"li\" id=\"d397065e54-d397089e109\">\n<a name=\"d397065e54-d397089e109\"><!-- --></a>Click <strong class=\"ph uicontrol\">Version Settings</strong> to specify the version of Apex and the API used with this\nclass. <span class=\"ph\">If your organization has installed managed\npackages from the AppExchange, you\ncan also specify which version of each managed package to use with\nthis class.</span> Use the default values for all versions. This associates\nthe class with the most recent version of Apex and the API, as well as\neach managed package. <span class=\"ph\" id=\"d397065e54-d397089e128\"><a name=\"d397065e54-d397089e128\"><!-- --></a>You\ncan specify an older version of a managed package if you want to access\ncomponents or functionality that differs from the most recent package\nversion. </span>You can specify an older version of Apex and the API to maintain\nspecific behavior. </li>\n\n<li class=\"li\">In the class editor, enter the Apex code\n     for the class. A single class can be up to 1 million characters in length, not\n     including comments, test methods, or classes defined using <samp class=\"codeph apex_code\"><span class=\"keyword\">@isTest</span></samp>.</li>\n\n<li class=\"li\">Click <strong class=\"ph uicontrol\">Save</strong> to save your changes and return\nto the class detail screen, or click <strong class=\"ph uicontrol\">Quick Save</strong> to save your changes and continue editing your class. Your Apex class must\ncompile correctly before you can save your class.</li>\n\n</ol>\n</div>\n\n<p class=\"p\">The following class is a simple example of a custom controller:</p>\n\n<div class=\"codeSection apex_code\"><pre class=\"codeblock brush:apex\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> MyController {\n\n    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Account account;\n\n    <span class=\"keyword\">public</span> MyController() {\n        account = [SELECT Id, Name, Site FROM Account \n                   WHERE Id = :ApexPages.currentPage().getParameters().get(<span class=\"string\">'id'</span>)];\n    }\n\n    <span class=\"keyword\">public</span> Account getAccount() {\n        <span class=\"statement\">return</span> account;\n    }\n\n    <span class=\"keyword\">public</span> PageReference save() {\n        <span class=\"statement\">update</span> account;\n        <span class=\"statement\">return</span> <span class=\"keyword\">null</span>;\n    }\n}</pre></div>\n\n<p class=\"p\">The following Visualforce markup shows how the custom controller above can be used in a page:</p>\n\n<div class=\"codeSection apex_page\"><pre class=\"codeblock brush:VisualForce\"><span class=\"tag\">&lt;apex:page</span><span class=\"attribute\"> controller=</span><span class=\"string\">\"myController\"</span><span class=\"attribute\"> tabStyle=</span><span class=\"string\">\"Account\"</span>&gt;\n    <span class=\"tag\">&lt;apex:form</span>&gt;\n        <span class=\"tag\">&lt;apex:pageBlock</span><span class=\"attribute\"> title=</span><span class=\"string\">\"Congratulations {!$User.FirstName}\"</span>&gt;\n            You belong to Account Name: <span class=\"tag\">&lt;apex:inputField</span><span class=\"attribute\"> value=</span><span class=\"string\">\"{!account.name}\"</span>/&gt;\n            <span class=\"tag\">&lt;apex:commandButton</span><span class=\"attribute\"> action=</span><span class=\"string\">\"{!save}\"</span><span class=\"attribute\"> value=</span><span class=\"string\">\"save\"</span>/&gt;\n        <span class=\"tag\">&lt;/apex:pageBlock</span>&gt;\n    <span class=\"tag\">&lt;/apex:form</span>&gt;\n<span class=\"tag\">&lt;/apex:page</span>&gt;</pre></div>\n\n<p class=\"p\">The custom controller is associated with the page because of the <samp class=\"codeph apex_page\">controller</samp> attribute of the <samp class=\"codeph apex_page\"><span class=\"tag\">&lt;apex:page</span>&gt;</samp> component.</p>\n\n<p class=\"p\">As with standard controllers and controller extensions, custom\ncontroller methods can be referenced with <samp class=\"codeph apex_page\"><span class=\"formula\">{! }</span></samp> notation in the associated page\nmarkup. In the example above, the <samp class=\"codeph apex_code\">getAccount</samp> method is referenced by the <samp class=\"codeph apex_page\"><span class=\"tag\">&lt;apex:inputField</span>&gt;</samp> tag's <samp class=\"codeph apex_page\">value</samp> attribute, while the <samp class=\"codeph apex_page\"><span class=\"tag\">&lt;apex:commandButton</span>&gt;</samp> tag references\nthe <samp class=\"codeph apex_code\">save</samp> method with its <samp class=\"codeph apex_page\">action</samp> attribute.</p>\n\n<div class=\"box message info\"><div class=\"inner\"><div class=\"bd\"><div class=\"media\">\n<img class=\"img mtm\" src=\"//res.cloudinary.com/hy4kyit2a/image/upload/img/msg_icons/helpNote_icon.gif\" alt=\"Note\"><div class=\"mediaBd\">\n<h4 class=\"mbs\">Note</h4>\n<p>Like other Apex classes, all\n            custom controllers run in system mode. <span class=\"ph\" id=\"system_mode\"><a name=\"system_mode\"><!-- --></a>Consequently, the current\n                user's credentials are not used to execute controller logic, and the user's\n                permissions and field-level security do not apply.</span><p class=\"p\">You can choose whether a\n                custom controller respects a user's organization-wide defaults, role hierarchy, and\n                sharing rules by using the <samp class=\"codeph apex_code\">with sharing</samp>\n                keywords in the class definition. <span class=\"ph\" id=\"info_on_with_sharing\"><a name=\"info_on_with_sharing\"><!-- --></a>For information, see\n                        ‚ÄúUsing the <samp class=\"codeph apex_code\">with sharing</samp> or <samp class=\"codeph apex_code\">without\nsharing</samp> Keywords‚Äù in the <cite class=\"cite\"><a class=\"xref\" href=\"https://developer.salesforce.com/docs/atlas.en-us.206.0.apexcode.meta/apexcode/apex_classes_keywords_sharing.htm\" target=\"_blank\" title=\"html (New Window)\">Apex Developer Guide</a></cite>.</span></p>\n</p>\n</div>\n</div></div></div></div>\n\n<p class=\"p\">A custom controller can also be used to create new records. For\nexample:</p>\n\n<div class=\"codeSection apex_code\"><pre class=\"codeblock brush:apex\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> NewAndExistingController {\n\n    <span class=\"keyword\">public</span> Account account { get; <span class=\"keyword\">private</span> set; }\n\n    <span class=\"keyword\">public</span> NewAndExistingController() {\n        Id id = ApexPages.currentPage().getParameters().get(<span class=\"string\">'id'</span>);\n        account = (id == <span class=\"keyword\">null</span>) ? <span class=\"keyword\">new</span> Account() : \n            [SELECT Name, Phone, Industry FROM Account WHERE Id = :id];\n    }\n\n    <span class=\"keyword\">public</span> PageReference save() {\n        <span class=\"statement\">try</span> {\n            <span class=\"statement\">upsert</span>(account);\n        } <span class=\"statement\">catch</span>(System.DMLException e) {\n            ApexPages.addMessages(e);\n            <span class=\"statement\">return</span> <span class=\"keyword\">null</span>;\n        }\n        <span class=\"onelineComment\">//  After successful Save, navigate to the default view page</span>\n        PageReference redirectSuccess = <span class=\"keyword\">new</span> ApexPages.StandardController(Account).view();\n        <span class=\"statement\">return</span> (redirectSuccess);\n    }\n}\n</pre></div>\n\n<p class=\"p\">The following Visualforce markup shows how the custom controller above can be used in a page:</p>\n\n<div class=\"codeSection apex_page\"><pre class=\"codeblock brush:VisualForce\"><span class=\"tag\">&lt;apex:page</span><span class=\"attribute\"> controller=</span><span class=\"string\">\"NewAndExistingController\"</span><span class=\"attribute\"> tabstyle=</span><span class=\"string\">\"Account\"</span>&gt;\n    <span class=\"tag\">&lt;apex:form</span>&gt;\n        <span class=\"tag\">&lt;apex:pageBlock</span><span class=\"attribute\"> mode=</span><span class=\"string\">\"edit\"</span>&gt;\n            <span class=\"tag\">&lt;apex:pageMessages/</span>&gt;\n            <span class=\"tag\">&lt;apex:pageBlockSection</span>&gt;\n                <span class=\"tag\">&lt;apex:inputField</span><span class=\"attribute\"> value=</span><span class=\"string\">\"{!Account.name}\"</span>/&gt;\n                <span class=\"tag\">&lt;apex:inputField</span><span class=\"attribute\"> value=</span><span class=\"string\">\"{!Account.phone}\"</span>/&gt;\n                <span class=\"tag\">&lt;apex:inputField</span><span class=\"attribute\"> value=</span><span class=\"string\">\"{!Account.industry}\"</span>/&gt;\n            <span class=\"tag\">&lt;/apex:pageBlockSection</span>&gt;\n            <span class=\"tag\">&lt;apex:pageBlockButtons</span><span class=\"attribute\"> location=</span><span class=\"string\">\"bottom\"</span>&gt;\n                <span class=\"tag\">&lt;apex:commandButton</span><span class=\"attribute\"> value=</span><span class=\"string\">\"Save\"</span><span class=\"attribute\"> action=</span><span class=\"string\">\"{!save}\"</span>/&gt;\n            <span class=\"tag\">&lt;/apex:pageBlockButtons</span>&gt;\n        <span class=\"tag\">&lt;/apex:pageBlock</span>&gt;\n    <span class=\"tag\">&lt;/apex:form</span>&gt;\n<span class=\"tag\">&lt;/apex:page</span>&gt;</pre></div>\n\n</div><!--DRC 206.14-->"}L5óv´      Xˇ‹Xˇ‹=∞ën       i:https://developer.salesforce.com/docs/get_document_content/pages/pages_controller_custom.htm/en-us/206.0 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8F+O2DZM7ZTG6GukivU8OT5gAAAAAAAAgIMIIIBDCCBuygAwIBAgIMe76S/QSV9bCdvV1zMA0GCSqGSIb3DQEBCwUAMFcxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWduIG52LXNhMS0wKwYDVQQDEyRHbG9iYWxTaWduIENsb3VkU1NMIENBIC0gU0hBMjU2IC0gRzMwHhcNMTYwOTA3MDAwMzAyWhcNMTcwOTA3MjAzMDI4WjBzMQswCQYDVQQGEwJVUzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNU2FuIEZyYW5jaXNjbzEVMBMGA1UECgwMRmFzdGx5LCBJbmMuMSAwHgYDVQQDDBdkZXZmb3JjZS5tYXAuZmFzdGx5Lm5ldDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMIAM/79bYYn5oubh22mw37yjuwaVCCSUomsbx0DRybBGZJz+09yCEhAHlqZ+BeHHDYZR0dI1vBkdYXUQzlX0a0bOSn0ayT79gUCziYT3XFnBp+1yAJr8P+ArtZC4tIOlmVUQUjgu7UXeE/TxgbQGFuDYUJuPPPvxL7wi9KQoVm4o0IuU+kmDTLCuA3rRBW35O7sMKNwgWSdg6JhHhdbIGeJ3n/Wd7nkVs9cvaZido8tm2V25t/ApoSDS+USdJvubzm0WmMRsHa/Cx/Vtxo8k7f7JGkY8NtFaqPAdrz+t1kz+Juxuo3xYGarNSvnU6o9yaMT5NO+UskP5oUJBnS52U0CAwEAAaOCBLIwggSuMA4GA1UdDwEB/wQEAwIFoDCBigYIKwYBBQUHAQEEfjB8MEIGCCsGAQUFBzAChjZodHRwOi8vc2VjdXJlLmdsb2JhbHNpZ24uY29tL2NhY2VydC9jbG91ZHNzbHNoYTJnMy5jcnQwNgYIKwYBBQUHMAGGKmh0dHA6Ly9vY3NwMi5nbG9iYWxzaWduLmNvbS9jbG91ZHNzbHNoYTJnMzBWBgNVHSAETzBNMEEGCSsGAQQBoDIBFDA0MDIGCCsGAQUFBwIBFiZodHRwczovL3d3dy5nbG9iYWxzaWduLmNvbS9yZXBvc2l0b3J5LzAIBgZngQwBAgIwCQYDVR0TBAIwADCCA0sGA1UdEQSCA0IwggM+ghdkZXZmb3JjZS5tYXAuZmFzdGx5Lm5ldIIWKi5hZG1pbi5zYWxlc2ZvcmNlLmNvbYIWKi5ibG9vbS5zYWxlc2ZvcmNlLmNvbYIWKi5idXR0b25jbGlja2FkbWluLmNvbYIaKi5kZXZlbG9wZXIuc2FsZXNmb3JjZS5jb22CFCouZGV2ZWxvcGVyZm9yY2UuY29tgiYqLmRldmVsb3BtZW50LmRldmVsb3Blci5zYWxlc2ZvcmNlLmNvbYImKi5kZXZlbG9wbWVudC50cmFpbGhlYWQuc2FsZXNmb3JjZS5jb22CHyouZG9jcy5kZXZlbG9wZXIuc2FsZXNmb3JjZS5jb22CHSoucWEuZGV2ZWxvcGVyLnNhbGVzZm9yY2UuY29tghcqLnFhLmRldmVsb3BlcmZvcmNlLmNvbYIdKi5xYS50cmFpbGhlYWQuc2FsZXNmb3JjZS5jb22CHiouc3RhZ2luZy5hZG1pbi5zYWxlc2ZvcmNlLmNvbYIeKi5zdGFnaW5nLmJsb29tLnNhbGVzZm9yY2UuY29tgh4qLnN0YWdpbmcuYnV0dG9uY2xpY2thZG1pbi5jb22CIiouc3RhZ2luZy5kZXZlbG9wZXIuc2FsZXNmb3JjZS5jb22CHCouc3RhZ2luZy5kZXZlbG9wZXJmb3JjZS5jb22CISouc3RhZ2luZy5zdGFydHVwcy5zYWxlc2ZvcmNlLmNvbYIiKi5zdGFnaW5nLnRyYWlsaGVhZC5zYWxlc2ZvcmNlLmNvbYIZKi5zdGFydHVwcy5zYWxlc2ZvcmNlLmNvbYIaKi50cmFpbGhlYWQuc2FsZXNmb3JjZS5jb22CHioud29ya2JlbmNoLmRldmVsb3BlcmZvcmNlLmNvbYIUYWRtaW4uc2FsZXNmb3JjZS5jb22CFGJsb29tLnNhbGVzZm9yY2UuY29tghRidXR0b25jbGlja2FkbWluLmNvbYIYZGV2ZWxvcGVyLnNhbGVzZm9yY2UuY29tghJkZXZlbG9wZXJmb3JjZS5jb22CF3N0YXJ0dXBzLnNhbGVzZm9yY2UuY29tghh0cmFpbGhlYWQuc2FsZXNmb3JjZS5jb20wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB0GA1UdDgQWBBS2E3ayqL/4TdSaRFSnncZvTAql1zAfBgNVHSMEGDAWgBSpK4fhziRHOxu/z4U3AlWdDZRY5jANBgkqhkiG9w0BAQsFAAOCAQEAQOFGpYfrk0CCBi8xevyufBm8PswC5zCUOPl3f+PEnzu+/K0t1fySj5Dqzq1i1eAMvLeqsK49zSTtEYfSY+Yscdfd5QShnom2XkF5TErs05bJedTJyAAcq1w16+TQbTkcKDR1lLi4vLzap5mfATWwyKaQFBsMuwkPZV03FtEjnxAjAnN2e118LXueQgzvpjNhyav/JeaMCFbn+Ju0N0zVG0POP7zcZPJqJN7uUgoyxBFHKASwIZW1Ru4g3pGXwttRxLQlLS1tsljEPl4vi3E+OUPmd1BK4506wzlWOdxX3BNCHq5DDYL/uhdrH7txG1JF7YzqaNviWxk/ugXHImorQMAvAAMAAAAAAQEAAA== request-method GET response-head HTTP/1.1 200 OK
Server: nginx
Content-Type: application/json; charset=utf-8
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
p3p: CP="ALL DSP COR CURa ADMa DEVa OUR IND COM NAV"
Etag: W/"fbe4151945ced49ae29932edf4c0d038"
Cache-Control: max-age=0, private, must-revalidate
X-Runtime: 0.023997
Via: 1.1 vegur, 1.1 varnish
Accept-Ranges: bytes
Date: Tue, 25 Apr 2017 13:34:05 GMT
Age: 0
x-request-id: 8fec4d8d6a30124f5d17b9b30506a64d711c5ae2
X-Served-By: cache-sin18020-SIN
X-Cache: MISS
X-Cache-Hits: 0
X-Timer: S1493127244.416930,VS0,VE1002
   )