public class SMSHistoryTriggerHandler
{
    public static void onAfterInsert(list<tdc_tsw__Message__c> newListOfSMSHistory)
    {
        onAfterInsertAction(newListOfSMSHistory);
    }
    
    private static void onAfterInsertAction(list<tdc_tsw__Message__c> newListOfSMSHistory)
    {
      String setMessage;
      set<String> setLeadID = new set<String>();
      list<Lead> listlead = new list<Lead>();
      
      for(tdc_tsw__Message__c objMessage :newListOfSMSHistory){
         if(objMessage.Name == 'Incoming' &&
             String.isNotBlank(String.valueOf(objMessage.tdc_tsw__Message_Text_New__c)) && 
             String.isNotBlank(String.valueOf(objMessage.tdc_tsw__Lead__c))){
             setLeadID.add(objMessage.tdc_tsw__Lead__c);
             setMessage = objMessage.tdc_tsw__Message_Text_New__c ;
             
         }
      }
      //  setMessage = ' SMS_="[nikhil ; nikhil@test.com; 1231231 ]" ';  
      set<String> setDetails = new set<String>();  
      if(setMessage.startswith('SMS_="[') && setMessage.endsWith(']"')){
         for(String str : setMessage.split(';'))
         {   
          setDetails.add(str);
         }
       }  
     for(tdc_tsw__Message__c objMes :[select id,tdc_tsw__Lead__c from tdc_tsw__Message__c where tdc_tsw__Lead__c =: setLeadID ]){   
         if(setDetails.size() > 2)
           {  
            for(String str : setMessage.split(';')) 
               Lead objLead = new Lead();
            //   objLead.id = objMes.tdc_tsw__Lead__c;
           //    objLead.Name  =  setDetails[0];
          //     objLead.Email = setDetail[1];
           //   objLead.SICCode__c = setDetail[2];   
           }
        }     
    }
}

